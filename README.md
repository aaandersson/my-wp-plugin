# template-wp-plugin

A template for WordPress plugins.

## Prerequisites

Things to install before you start developing.

### PHP and Composer

Install PHP and [Composer](https://getcomposer.org/doc/00-intro.md) using your package manager. Composer is a package manager for PHP.

### Node.js and NPM

[Node.js](https://nodejs.org/en/about/) is a JavaScript runtime. It often comes bundeled with it's own package manager, [npm](https://docs.npmjs.com/about-npm). Installation instructions for both packages can be found [here](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm).

### Visual Studio Code (recommended)

This repository contains some settings and recommended extensions for the text editor/IDE [VS Code](https://code.visualstudio.com/).

### wp-env (optional)

The npm package [@wordpress/env](https://www.npmjs.com/package/@wordpress/env) lets you test plugins inside [Docker](https://docs.docker.com/get-started/overview/) containers. First [install](https://docs.docker.com/get-docker/) and [start](https://docs.docker.com/config/daemon/systemd/) Docker, also install [Docker compose](https://docs.docker.com/compose/install/), then install `@wordpress/env` globally:

```console
npm install -g @wordpress/env
```

Some useful wp-env commands to be run from the plugin root directory are

```console
wp-env start   # Start local environment
wp-env stop    # Stop local environment
wp-env destroy # WARNING: This will permanently delete any posts, pages, media, etc. in the local WordPress installation.
```

## Getting started

Install npm and Composer dependencies:

```console
npm install
composer install
```

During development, the following command will automatically rebuild code as source files are changed.

```console
npm run start
```

You can check for (stylistic) errors in your code by running

```console
npm run lint
```

Format the code base by running

```console
npm run format
```

Create a production build by running

```console
npm run build
```

For simplicity when installing the plugin, we keep built files under version control. Lint, format and build your code before commiting any changes.

### Generate autoload files

To import PHP classes, we use the [autoload file generated by Composer](https://getcomposer.org/doc/01-basic-usage.md#autoloading). After creating a new file containing a class you would like to import, regenerate the autoload file by running

```console
composer dump-autoload
```

### Internationalization

Run the command

```console
npm run i18n
```

to scan the source code for translatable strings (which are stored in a POT file inside the `languages` folder) and update existing translations (PO files also stored inside `languages`) from the POT file. To edit an existing localization, edit the corresponding PO file. To create a new localization, copy the POT file to a new PO file inside `languages`. Assuming the POT file is named `my-text-domain.pot`, name the PO file `my-text-domain-{locale}.po`, for example `my-text-domain-en_US.po`. Lists of locale codes available in WordPress can be found [online](https://wpastra.com/docs/complete-list-wordpress-locale-codes/).
